В основном процессе для каждой команды:
- Блокируем map-файл (через flock).
- Читаем слагаемые, записываем в общий массив чисел.
- В конце обработки команды:
  - Если встретили ошибку или конец ввода, говорим ребёнку завершиться (выставляем нулевой элемент) и выходим сами.
  - Иначе, если встретили конец команды:
    - записываем нулевым элементом число слагаемых;
    - ждём ребёнка;
    - переходим к обработке следующей команды.
